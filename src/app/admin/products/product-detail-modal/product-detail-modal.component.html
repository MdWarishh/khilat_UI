<!-- admin/products/product-detail-modal/product-detail-modal.component.html -->
<div class="modal-overlay" *ngIf="show && product" (click)="onClose.emit()">
  <div class="modal-box detail-modal" (click)="$event.stopPropagation()">

    <!-- Header -->
    <div class="modal-head">
      <h2>Product Details</h2>
      <button class="btn-close" (click)="onClose.emit()">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>

    <div class="detail-body">

      <!-- Images Section -->
      <div class="detail-images" *ngIf="product!.productImages?.length">
        <div class="main-img-wrap">
          <img [src]="resolveImage(product!.productImages[activeImageIndex]?.imageUrl ?? '')"
               [alt]="product!.name" class="main-img">
        </div>
        <div class="thumb-row" *ngIf="product!.productImages.length > 1">
          <div *ngFor="let img of product!.productImages; let i = index"
               class="thumb-item"
               [class.active]="i === activeImageIndex"
               (click)="activeImageIndex = i">
            <img [src]="resolveImage(img.imageUrl)" alt="">
          </div>
        </div>
      </div>

      <!-- No Image Placeholder -->
      <div class="no-image-box" *ngIf="!product!.productImages?.length">
        <span>ðŸ“·</span>
        <p>No images uploaded</p>
      </div>

      <!-- Product Info -->
      <div class="detail-info">

        <!-- Badges -->
        <div class="detail-badges">
          <span class="cat-chip"      *ngIf="product!.category">{{ product!.category!.name }}</span>
          <span class="trending-chip yes" *ngIf="product!.trending === 'y'">ðŸ”¥ Trending</span>
          <span class="status-chip active" *ngIf="product!.isActive">Active</span>
          <span class="status-chip"        *ngIf="!product!.isActive">Inactive</span>
        </div>

        <h3 class="detail-name">{{ product!.name }}</h3>
        <p class="detail-price">â‚¹{{ product!.price | number:'1.0-0' }}</p>
        <p class="detail-desc">{{ product!.description || 'No description provided.' }}</p>

        <!-- Stats Grid -->
        <div class="detail-grid">
          <div class="detail-item">
            <span class="di-label">Product ID</span>
            <span class="di-val">#{{ product!.id }}</span>
          </div>
          <div class="detail-item">
            <span class="di-label">Stock</span>
            <span class="di-val" [class.text-red]="product!.stock === 0">
              {{ product!.stock === 0 ? 'Out of Stock' : product!.stock + ' units' }}
            </span>
          </div>
          <div class="detail-item">
            <span class="di-label">Category</span>
            <span class="di-val">{{ product!.category?.name || 'â€”' }}</span>
          </div>
          <div class="detail-item">
            <span class="di-label">Added On</span>
            <span class="di-val">{{ product!.createdAt | date:'dd MMM yyyy' }}</span>
          </div>
        </div>

        <!-- Edit Button -->
        <div class="detail-footer-btns">
          <button class="btn-edit-from-detail" (click)="onEdit.emit(product!)">
            Edit Product
          </button>
        </div>

      </div>
    </div>
  </div>
</div>